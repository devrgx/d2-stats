---
import Layout from "../../layouts/Layout.astro";
import StatBlock from "../../components/StatBlock.astro";
import RankBar from "../../components/RankBar.astro";

export const prerender = false;

const { player } = Astro.params;

// Platzhalter – später Bungie-API
const playerName = "Unknown Guardian";
const bungieTag = "";
const clanName = "[TAG] NAME";
const emblemBackground = "/missing_emblem_special.jpg";
const emblemIcon = "/missing_emblem_icon.png";

const socials = {
  twitch: "test",
  youtube: "test",
  reddit: "test",
  website: "https://beta.notrgx.com/",
};
---

<Layout title={`${playerName} — CruciCore`}>
  <!-- Emblem Header -->
  <section
    class="cc-header"
    style={`background-image:url('${emblemBackground}')`}
  >
    <div class="cc-header__scrim"></div>

    <div class="cc-header__inner">
      <img src={emblemIcon} alt="Emblem" class="cc-header__icon" />

      <div class="cc-header__info">
        <h2 class="cc-header__name">
          {playerName}
          <span class="cc-header__tag">{bungieTag}</span>
        </h2>
        <div class="cc-header__meta">
          <span>{clanName}</span>
          <span>• Platform: —</span>
          <span>• Membership ID: {player}</span>

          <div class="cc-socials">
            {
              socials.twitch && (
                <a
                  href={`https://twitch.tv/${socials.twitch}`}
                  target="_blank"
                  rel="noreferrer"
                  class="cc-social cc-social--twitch"
                  title={`Twitch — ${socials.twitch}`}
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    width="18"
                    height="18"
                    fill="currentColor"
                  >
                    <path d="M4.265 3L3 6.706v11.018h5.294V21h2.647l2.647-3.276h3.97L21 13.412V3H4.265zm15.06 9.882-2.118 2.471h-4.235L10.323 18v-2.647H5.647V4.941h13.676v7.941z" />
                    <path d="M15.353 8.471h1.765v3.529h-1.765zM11.588 8.471h1.765v3.529h-1.765z" />
                  </svg>
                </a>
              )
            }

            {
              socials.youtube && (
                <a
                  href={`https://youtube.com/@${socials.youtube}`}
                  target="_blank"
                  rel="noreferrer"
                  class="cc-social cc-social--youtube"
                  title={`YouTube — ${socials.youtube}`}
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    width="18"
                    height="18"
                    fill="currentColor"
                  >
                    <path d="M10 15l5.19-3L10 9v6zm12-3c0-2.23-.17-3.73-.39-4.76-.26-1.21-1.02-2.16-2.01-2.43C18.36 4.5 12 4.5 12 4.5s-6.36 0-7.6.31c-.99.27-1.75 1.22-2.01 2.43C2.17 8.27 2 9.77 2 12c0 2.23.17 3.73.39 4.76.26 1.21 1.02 2.16 2.01 2.43 1.24.31 7.6.31 7.6.31s6.36 0 7.6-.31c.99-.27 1.75-1.22 2.01-2.43.22-1.03.39-2.53.39-4.76z" />
                  </svg>
                </a>
              )
            }

            {
              socials.reddit && (
                <a
                  href={`https://reddit.com/u/${socials.reddit}`}
                  target="_blank"
                  rel="noreferrer"
                  class="cc-social cc-social--reddit"
                  title={`Reddit — ${socials.reddit}`}
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    width="18"
                    height="18"
                    fill="currentColor"
                  >
                    <path d="M22 12c0-1.1-.9-2-2-2-.49 0-.93.18-1.27.48-1.27-.83-3.01-1.36-4.97-1.43l.99-4.64 3.23.68c0 1.02.83 1.85 1.85 1.85s1.85-.83 1.85-1.85S20.85 3 19.83 3c-.73 0-1.36.43-1.66 1.05l-3.76-.8a.5.5 0 0 0-.59.39l-1.14 5.34c-2.01.07-3.79.62-5.09 1.49A2 2 0 0 0 4 10c-1.1 0-2 .9-2 2 0 .83.5 1.55 1.22 1.85-.03.2-.05.4-.05.61 0 2.91 3.13 5.27 7 5.27s7-2.36 7-5.27c0-.2-.02-.41-.05-.61A1.98 1.98 0 0 0 22 12zM8.5 13c.83 0 1.5.67 1.5 1.5S9.33 16 8.5 16s-1.5-.67-1.5-1.5S7.67 13 8.5 13zm7 3c-1.31.94-4.69.97-6 0a.5.5 0 1 1 .58-.81c.84.6 3.99.64 4.84 0a.5.5 0 0 1 .58.81zM15.5 16c-.83 0-1.5-.67-1.5-1.5S14.67 13 15.5 13s1.5.67 1.5 1.5S16.33 16 15.5 16z" />
                  </svg>
                </a>
              )
            }

            {
              socials.website && (
                <a
                  href={`${socials.website}`}
                  target="_blank"
                  rel="noreferrer"
                  class="cc-social cc-social--dev"
                  title="Developer Website"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    width="18"
                    height="18"
                    fill="currentColor"
                  >
                    <path d="M9.4 16.6 5.8 13l3.6-3.6L8 8l-5 5 5 5 1.4-1.4zm5.2 0 3.6-3.6-3.6-3.6L16 8l5 5-5 5-1.4-1.4z" />
                  </svg>
                </a>
              )
            }
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Hauptinhalt -->
  <main class="container">
    <section style="margin-top:32px;">
      <h2>Trials of Osiris</h2>
      <div class="grid">
        <div class="col-3"><StatBlock label="Weekly KD" value="—" /></div>
        <div class="col-3"><StatBlock label="Seasonal KD" value="—" /></div>
        <div class="col-3"><StatBlock label="Flawless Count" value="—" /></div>
        <div class="col-3">
          <StatBlock label="Flawless this week" value="—" />
        </div>
      </div>
    </section>

    <section style="margin-top:18px;">
      <h2>Competitive / Crucible</h2>
      <div class="grid">
        <div class="col-4"><StatBlock label="Overall KD" value="—" /></div>
        <div class="col-4"><StatBlock label="Kills" value="—" /></div>
        <div class="col-4"><StatBlock label="Deaths" value="—" /></div>
      </div>
      <div style="margin-top:12px;">
        <RankBar label="Glorious Rank Progress" current={0} max={5500} />
      </div>
    </section>
  </main>
</Layout>
